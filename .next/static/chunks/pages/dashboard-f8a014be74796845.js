(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{151:(e,t,s)=>{"use strict";s.d(t,{H:()=>a});let a="https://matrimonial-backend-7ahc.onrender.com"},6585:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var a=s(7876),l=s(4232),n=s(8e3),r=s(6320),c=s(4758),i=s(2333),d=s(4354),o=s(8072),x=s(1824);function h(){let e=["January","February","March","April","May","June","July","August","September","October","November","December"],[t,s]=(0,l.useState)("November"),[h,m]=(0,l.useState)("October"),[p,u]=(0,l.useState)([]),[f,j]=(0,l.useState)([]),[g,b]=(0,l.useState)([]),[v,y]=(0,l.useState)(0),[N,w]=(0,l.useState)(0),[k,M]=(0,l.useState)(!0),[S,E]=(0,l.useState)(null);(0,l.useEffect)(()=>{let s=!0;return(async()=>{M(!0),m(function(t){let s=e.indexOf(t);return 0===s?"December":e[s-1]}(t));try{var a,l;let e=await fetch("".concat("https://matrimonial-backend-7ahc.onrender.com/admin/getByGender","?month=").concat(t)),n=await e.json();if(!s)return;u(n.genderData||[]),j(n.matchData||[]),b((n.signInData||[]).map(e=>{var t,s;return{day:e.day,currentMonth:null!=(t=e.currentMonth)?t:0,previousMonth:null!=(s=e.previousMonth)?s:0}})),y(null!=(a=n.totalCurrentMonthSignIns)?a:0),w(null!=(l=n.percentGrowth)?l:0)}catch(e){console.log("API error:",e)}M(!1)})(),()=>s=!1},[t]);let L={Male:"#34D399",Female:"#FDE047",Others:"#F87171"},A={"Still Looking":"#10B981","Successfully Matched":"#FB923C","Newly Registered":"#06B6D4",Inactive:"#FBBF24"};function C(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,n=Math.max(1,e.reduce((e,t)=>e+(t.value||0),0)),r=-Math.PI/2+.2;return e.map(e=>{let c=e.value/n*Math.PI*2,i=r+c,d=t+a*Math.cos(r),o=s+a*Math.sin(r),x=t+a*Math.cos(i),h=s+a*Math.sin(i),m=+(c>Math.PI),p="M ".concat(t," ").concat(s," L ").concat(d," ").concat(o," A ").concat(a," ").concat(a," 0 ").concat(m," 1 ").concat(x," ").concat(h," Z"),u="M ".concat(d," ").concat(o," L ").concat(d," ").concat(o+l," A ").concat(a," ").concat(a," 0 ").concat(m," 1 ").concat(x," ").concat(h+l," L ").concat(x," ").concat(h," Z"),f=r+c/2,j=t+(a+44)*Math.cos(f),g=s+(a+44)*Math.sin(f),b=t+(a-12)*Math.cos(f),v=s+(a-12)*Math.sin(f);return r=i,{name:e.name,value:e.value,percent:Math.round(e.value/n*100),topPath:p,sidePath:u,labelPos:{lx:j,ly:g,ax:b,ay:v}}})}let D=C(p,150,120,110,24),P=C(f,150,150,110,30);function I(e,t){E({...t,x:e.clientX+10,y:e.clientY-70})}function B(e,t){E({...t,x:e.clientX+10,y:e.clientY-70})}function _(){E(null)}return k?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading..."}):(0,a.jsx)("div",{className:"p-8 min-h-screen",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-54",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-lg border h-[700px] p-6 w-[140%]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Sign-In Analytics"}),(0,a.jsxs)("div",{className:"flex items-end gap-4 mt-2",children:[(0,a.jsxs)("div",{className:"text-4xl font-extrabold",children:[v,"."]}),(0,a.jsxs)("div",{className:"bg-green-100 border border-green-400 px-3 py-1 rounded-lg text-green-700 font-semibold flex items-center gap-2",children:[(0,a.jsx)("span",{style:{fontSize:18},children:"↑"})," ",N,"%"]}),(0,a.jsx)("div",{className:"text-gray-600 font-medium",children:"Vs Last Month"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-lg",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-black"})," ",t]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-lg",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-gray-400"})," ",h]}),(0,a.jsx)("select",{className:"border rounded-xl px-4 py-2",value:t,onChange:e=>s(e.target.value),children:e.map(e=>(0,a.jsx)("option",{children:e},e))})]})]}),(0,a.jsx)("div",{className:"w-full h-[540px] mt-2",children:(0,a.jsx)(n.u,{children:(0,a.jsxs)(r.b,{data:g,children:[(0,a.jsx)(c.d,{stroke:"#e6e6e6",strokeDasharray:"4 4"}),(0,a.jsx)(i.W,{dataKey:"day",ticks:["01","05","10","15","20","25","30"]}),(0,a.jsx)(d.h,{ticks:[0,5,10,15,20,25,30,35,40,45]}),(0,a.jsx)(o.m,{content:(0,a.jsx)(function(e){let{active:t,payload:s,label:l}=e;if(!t||!s||!s.length)return null;let n=s[0];return(0,a.jsxs)("div",{style:{background:"#111827",color:"#fff",padding:10,borderRadius:8},children:[(0,a.jsxs)("b",{children:["Day ",l]}),(0,a.jsx)("div",{children:n.value})]})},{})}),(0,a.jsx)(x.N,{dataKey:"currentMonth",stroke:"#000",strokeWidth:3,dot:!0}),(0,a.jsx)(x.N,{dataKey:"previousMonth",stroke:"#9ca3af",strokeDasharray:"6 6",strokeWidth:2,dot:!1})]})})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border p-4 relative h-[330px] w-[380%]",children:[S&&(0,a.jsxs)("div",{style:{position:"fixed",left:S.x,top:S.y,zIndex:9999,background:"#111827",color:"#fff",padding:10,borderRadius:6},children:[(0,a.jsx)("b",{children:S.name}),(0,a.jsxs)("div",{children:[S.percent,"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold",children:"Gender Analytics"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{style:{width:22,height:22,borderRadius:6,border:"2px solid ".concat(L.Male)}})," Male"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{style:{width:22,height:22,borderRadius:6,border:"2px solid ".concat(L.Female)}})," Female"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{style:{width:22,height:22,borderRadius:6,border:"2px solid ".concat(L.Others)}})," Ots."]})]})]}),(0,a.jsx)("svg",{width:"100%",height:"280",children:(0,a.jsxs)("g",{transform:"translate(30,18)",children:[D.map((e,t)=>(0,a.jsx)("path",{d:e.sidePath,fill:L[e.name],opacity:"0.66"},t)),D.map((e,t)=>(0,a.jsx)("g",{onMouseEnter:t=>I(t,e),onMouseMove:t=>B(t,e),onMouseLeave:_,children:(0,a.jsx)("path",{d:e.topPath,fill:L[e.name],stroke:"#fff",strokeWidth:2})},t))]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border p-4 relative h-[340px] w-[480px] overflow-hidden",children:[S&&(0,a.jsxs)("div",{style:{position:"fixed",left:S.x,top:S.y,zIndex:99999,background:"#111827",color:"#fff",padding:10,borderRadius:8},children:[(0,a.jsx)("b",{children:S.name}),(0,a.jsxs)("div",{children:[S.percent,"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold",children:"Matchmaking Status"}),(0,a.jsx)("div",{className:"space-y-1",children:Object.keys(A).map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{style:{width:18,height:18,borderRadius:8,border:"10px solid ".concat(A[e])}}),(0,a.jsx)("div",{className:"text-[14px] font-semibold",children:e})]},e))})]}),(0,a.jsx)("div",{className:"absolute left-1/3 top-[48%] -translate-x-1/2 -translate-y-1/2",children:(0,a.jsx)("svg",{width:"520",height:"320",children:(0,a.jsxs)("g",{transform:"translate(120,10)",children:[P.map((e,t)=>(0,a.jsx)("path",{d:e.sidePath,fill:A[e.name],opacity:"0.65"},t)),P.map((e,t)=>(0,a.jsx)("g",{onMouseEnter:t=>I(t,e),onMouseMove:t=>B(t,e),onMouseLeave:_,children:(0,a.jsx)("path",{d:e.topPath,fill:A[e.name],stroke:"#fff",strokeWidth:3})},t)),(0,a.jsx)("circle",{cx:"150",cy:"150",r:"48",fill:"#fff"})]})})})]})]})]})})}var m=s(3679),p=s(3458),u=s(9751),f=s(747),j=s(151),g=s(4587),b=s.n(g);let v=e=>{let{value:t}=e;return(0,a.jsx)(p.r,{width:75,height:75,children:(0,a.jsxs)(u.F,{data:[{name:"Completed",value:t},{name:"Remaining",value:100-t}],innerRadius:28,outerRadius:36,startAngle:90,endAngle:-270,cornerRadius:8,dataKey:"value",children:[(0,a.jsx)(f.f,{fill:"#e60000"}),(0,a.jsx)(f.f,{fill:"#fefbe5"})]})})},y=e=>{let{percent:t}=e,s=t>=0;return(0,a.jsxs)("div",{className:"flex items-start gap-[6px] leading-[15px] mt-[4px]",children:[s?(0,a.jsx)(m.uCC,{size:17,className:"text-green-600 mt-[2px]"}):(0,a.jsx)(m.$TP,{size:17,className:"text-red-600 mt-[2px]"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("span",{className:"text-[16px] font-semibold ".concat(s?"text-green-600":"text-red-600"),children:[Math.abs(t)," % Vs"]}),(0,a.jsx)("span",{className:"text-[13px] ".concat(s?"text-green-600":"text-red-600"),children:"last week"})]})]})},N=()=>{let[e,t]=(0,l.useState)(null);if((0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat(j.H,"/admin/summary")),s=await e.json();t(s)}catch(e){t(null)}})()},[]),!e)return(0,a.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,a.jsx)(b(),{src:"/loading2.gif",width:80,height:80,alt:"loading"})});let{totalUsers:s,newSignups:n,signupChangePercent:r,verifiedProfiles:c,verifiedChangePercent:i,pendingVerifications:d,pendingChangePercent:o,activeUsers:x,activeUsersChangePercent:h,reportedPercent:m,blockedPercent:p}=e;return(0,a.jsxs)("div",{className:"flex w-full gap-4 mt-2",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-300 rounded-xl shadow px-10 py-4 w-[25%] flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[16px] font-bold text-gray-800",children:"Total Users"}),(0,a.jsx)("h2",{className:"text-[30px] leading-[32px] font-semibold",children:s}),(0,a.jsx)(y,{percent:r})]}),(0,a.jsx)("div",{className:"w-[2px] h-[70px] bg-gray-300"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[16px] font-bold text-gray-800",children:"New Signups"}),(0,a.jsx)("h2",{className:"text-[30px] leading-[32px] font-semibold",children:n}),(0,a.jsx)(y,{percent:r})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-300 rounded-xl shadow px-6 py-4 w-[45%] flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[16px] font-bold text-gray-800",children:"Verified Profile"}),(0,a.jsx)("h2",{className:"text-[30px] leading-[32px] font-semibold",children:c}),(0,a.jsx)(y,{percent:i})]}),(0,a.jsx)("div",{className:"w-[2px] h-[70px] bg-gray-300"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[16px] font-bold text-gray-800",children:"Daily Active Users"}),(0,a.jsx)("h2",{className:"text-[30px] leading-[32px] font-semibold",children:x}),(0,a.jsx)(y,{percent:h})]}),(0,a.jsx)("div",{className:"w-[3px] h-[70px] bg-gray-300"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[16px] font-bold text-gray-800",children:"Pending Verification"}),(0,a.jsx)("h2",{className:"text-[30px] leading-[32px] font-semibold",children:d}),(0,a.jsx)(y,{percent:o})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-300 rounded-xl shadow px-6 py-4 w-[26%] flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-[16px] font-bold text-gray-800 mb-[2px]",children:"Reported Users"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(v,{value:m}),(0,a.jsxs)("span",{className:"absolute top-[28px] left-[30px] text-[14px] font-semibold",children:[m,"%"]})]})]}),(0,a.jsx)("div",{className:"w-[2px] h-[70px] bg-gray-300"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-[16px] font-bold text-gray-800 mb-[2px]",children:"Blocked Users"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(v,{value:p}),(0,a.jsxs)("span",{className:"absolute top-[28px] left-[30px] text-[14px] font-semibold",children:[p,"%"]})]})]})]})]})};function w(){let[e,t]=(0,l.useState)(""),[s,n]=(0,l.useState)(""),[r,c]=(0,l.useState)(""),[i,d]=(0,l.useState)([]),[o,x]=(0,l.useState)(1),[h,m]=(0,l.useState)(1),[p,u]=(0,l.useState)(!1),[f,g]=(0,l.useState)([]),[v,y]=(0,l.useState)(!1),N=async()=>{try{u(!0);let t=new URLSearchParams({search:e,status:s,gender:r,page:o,limit:10}),a=await fetch("".concat(j.H,"/admin/getUser?").concat(t.toString())),l=await a.json();d(l.data||[]),m(l.totalPages||1),u(!1)}catch(e){u(!1)}};(0,l.useEffect)(()=>{N()},[e,s,r,o]);let w=async()=>{try{let e=await fetch("".concat(j.H,"/api/banners")),t=await e.json();g(t.data||[])}catch(e){}};(0,l.useEffect)(()=>{w()},[]);let k=async e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(!s)return;let a=new FormData;a.append("banner",s);try{y(!0);let e=await fetch("".concat(j.H,"/api/banners"),{method:"POST",body:a}),t=await e.json();if(!e.ok)return;g(e=>[...e,...t.data])}finally{y(!1)}},M=async e=>{let t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=async t=>{var s;let a=null==(s=t.target.files)?void 0:s[0];if(!a)return;let l=new FormData;l.append("banner",a);try{y(!0);let t=await fetch("".concat(j.H,"/api/banners/").concat(e),{method:"PUT",body:l});if(await t.json(),!t.ok)return;w()}finally{y(!1)}},t.click()},S=async e=>{try{y(!0),await fetch("".concat(j.H,"/api/banners/").concat(e),{method:"DELETE"}),g(t=>t.filter(t=>t._id!==e))}finally{y(!1)}},E=4*Math.floor((o-1)/4)+1,L=Math.min(E+4-1,h);return(0,a.jsxs)("div",{className:"p-6 max-w-full mx-[-12px]",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-md border border-gray-500 p-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 border rounded-xl bg-white shadow-sm w-[300px]",children:[(0,a.jsx)(b(),{src:"/search.png",width:18,height:18,alt:"Search"}),(0,a.jsx)("input",{type:"text",placeholder:"Search By User ID",className:"w-full outline-none",value:e,onChange:e=>{t(e.target.value),x(1)}})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("select",{className:"border bg-gray-200 px-3 py-2 rounded-lg",value:s,onChange:e=>{n(e.target.value),x(1)},children:[(0,a.jsx)("option",{value:"",children:"Status"}),(0,a.jsx)("option",{children:"Approved"}),(0,a.jsx)("option",{children:"Pending"}),(0,a.jsx)("option",{children:"Blocked"})]}),(0,a.jsxs)("select",{className:"border bg-gray-200 px-3 py-2 rounded-lg",value:r,onChange:e=>{c(e.target.value),x(1)},children:[(0,a.jsx)("option",{value:"",children:"Gender"}),(0,a.jsx)("option",{children:"Male"}),(0,a.jsx)("option",{children:"Female"})]}),(0,a.jsx)("button",{onClick:()=>{if(!i.length)return;let e=Object.keys(i[0]),t=[];t.push(e.join(",")),i.forEach(s=>{let a=e.map(e=>'"'.concat(s[e],'"'));t.push(a.join(","))});let s=new Blob([t.join("\n")],{type:"text/csv"}),a=window.URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download="users.csv",l.click()},className:"px-4 py-2 bg-gray-200 rounded-lg border border-gray-600 hover:bg-gray-100",children:"Export CSV"})]})]}),(0,a.jsx)("div",{className:"overflow-auto border-t border-gray-300",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-100",children:(0,a.jsx)("tr",{children:["User ID","User Name","Location","Gender","Joined","Verified","Status","Last Active"].map(e=>(0,a.jsx)("th",{className:"text-left px-4 py-3 border-b border-gray-300 font-semibold text-gray-800",children:e},e))})}),(0,a.jsx)("tbody",{children:p?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,className:"text-center py-4 text-gray-500",children:"Loading..."})}):i.length?i.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3",children:e.id}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.name}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.location}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.gender}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.joined}),(0,a.jsx)("td",{className:"px-4 py-3",children:"Yes"===e.verified?(0,a.jsx)("span",{className:"text-green-600",children:"✔ Yes"}):(0,a.jsx)("span",{className:"text-red-600",children:"✘ No"})}),(0,a.jsx)("td",{className:"px-4 py-3 capitalize",children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full ".concat("Approved"===e.status?"bg-green-500":"Pending"===e.status?"bg-yellow-400":"bg-red-500")}),e.status]})}),(0,a.jsx)("td",{className:"px-4 py-3",children:e.lastActive})]},t)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,className:"text-center py-4 text-gray-500",children:"No users found."})})})]})}),(0,a.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-6 text-gray-700",children:[(0,a.jsx)("button",{onClick:()=>x(o-1),disabled:1===o,className:"".concat(1===o?"text-gray-400":"hover:underline"),children:"◄ Prev"}),(0,a.jsx)("span",{children:"|"}),Array.from({length:L-E+1},(e,t)=>E+t).map((e,t,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>x(e),className:"".concat(e===o?"font-bold underline":"hover:underline"),children:e}),t!==s.length-1&&(0,a.jsx)("span",{children:"|"})]},e)),L<h&&(0,a.jsx)("span",{children:"....."}),(0,a.jsx)("span",{children:"|"}),(0,a.jsx)("button",{onClick:()=>x(o+1),disabled:o===h,className:"".concat(o===h?"text-gray-400":"hover:underline"),children:"Next ►"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-md border border-gray-500 p-6 mt-10",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:"Current Images"}),(0,a.jsxs)("div",{className:"flex gap-6 flex-wrap",children:[f.map(e=>(0,a.jsxs)("div",{className:"rounded-xl overflow-hidden shadow-md border border-gray-300 w-[300px] relative",children:[(0,a.jsx)(b(),{src:e.image,width:320,height:180,alt:"banner",className:"w-full h-[180px] object-cover"}),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 w-full bg-white/60 backdrop-blur-md px-3 py-3 flex justify-between items-center",children:[(0,a.jsxs)("button",{onClick:()=>M(e._id),className:"flex items-center gap-2 px-6 py-2 border-2 border-red-500 text-red-500 rounded-xl text-base font-semibold",children:[(0,a.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"red",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M12 20h9"}),(0,a.jsx)("path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})]}),"Edit"]}),(0,a.jsxs)("button",{onClick:()=>S(e._id),className:"flex items-center gap-2 px-6 py-2 border-2 border-red-500 text-red-500 rounded-xl text-base font-semibold",children:[(0,a.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"red",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,a.jsx)("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),(0,a.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,a.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),"Delete"]})]})]},e._id)),(0,a.jsxs)("label",{className:"w-[150px] h-[150px] flex flex-col justify-center items-center border-4 border-[#b43f4a] text-[#b43f4a] rounded-2xl cursor-pointer text-xl font-bold",children:["+",(0,a.jsx)("span",{className:"text-sm font-semibold mt-1",children:"Add More"}),(0,a.jsx)("input",{type:"file",className:"hidden",onChange:k})]})]})]})]})}var k=s(9099),M=s(7814);let S=()=>{!function(){let e=(0,k.useRouter)();(0,l.useEffect)(()=>{localStorage.getItem("token")?e.push("/dashboard"):e.push("/")},[])}();let e=["Search By User Name","Search By User ID","Search By User Mobile"],[t,s]=(0,l.useState)(0),[n,r]=(0,l.useState)([]),[c,i]=(0,l.useState)(!1),d=(0,l.useRef)(null),o="https://matrimonial-backend-7ahc.onrender.com";(0,l.useEffect)(()=>{let t=setInterval(()=>{s(t=>(t+1)%e.length)},1200);return()=>clearInterval(t)},[]),(0,l.useEffect)(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let x=async()=>{try{let e=localStorage.getItem("token"),t=await fetch("".concat(o,"/api/notification/me"),{headers:{Authorization:"Bearer ".concat(e)}}),s=await t.json();if(s.success){let e=s.data.reverse();r(e)}}catch(e){console.log("Notification fetch error:",e)}};(0,l.useEffect)(()=>{x()},[]),(0,l.useEffect)(()=>(M.A.on("new-notification",e=>{r(t=>[e,...t])}),()=>M.A.off("new-notification")),[]);let m=async()=>{try{let e=localStorage.getItem("token");await fetch("".concat(o,"/api/notification/mark-all"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(e)}}),r(e=>e.map(e=>({...e,read:!0})))}catch(e){console.log(e)}},p=async e=>{try{let t=localStorage.getItem("token");await fetch("".concat(o,"/api/notification/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),r(t=>t.filter(t=>t._id!==e))}catch(e){console.log(e)}},u=async()=>{try{let e=localStorage.getItem("token");await Promise.all(n.map(t=>fetch("".concat(o,"/api/notification/").concat(t._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}}))),r([])}catch(e){console.log(e)}},f=n.some(e=>!e.read);return(0,a.jsxs)("div",{className:"flex w-full",children:[(0,a.jsx)("div",{className:"fixed top-0 left-0 h-full w-[250px] bg-white shadow-md border-r p-4"}),(0,a.jsxs)("div",{className:"fixed top-0 left-[250px] w-[calc(100%-250px)] h-[65px] bg-[#F7F7F7] border-b shadow-sm flex items-center justify-between px-10 z-50",children:[(0,a.jsx)("h1",{className:"text-[28px] font-extrabold text-black",children:"Dashboard"}),(0,a.jsxs)("div",{className:"relative cursor-pointer",ref:d,children:[(0,a.jsx)("svg",{onClick:()=>{let e=!c;i(e),e&&r(e=>e.map(e=>({...e,read:!0})))},xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"#FFC107",viewBox:"0 0 24 24",className:"cursor-pointer",children:(0,a.jsx)("path",{d:"M12 24c1.104 0 2-.897 2-2h-4c0 1.103.896 2 2 2zm6.707-5l1.293 1.293V21H4v-1.707L5.293 19H6v-7c0-3.309 2.691-6 6-6s6 2.691 6 6v7h.707zM18 18H6v-7c0-2.757 2.243-5 5-5s5 2.243 5 5v7z"})}),f&&(0,a.jsx)("span",{className:"absolute top-0 right-0 w-3 h-3 bg-red-600 rounded-full border border-white"}),c&&(0,a.jsxs)("div",{className:"absolute right-0 mt-3 w-80 bg-white shadow-xl border rounded-lg max-h-96 overflow-y-auto p-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-[16px]",children:"Notifications"}),(0,a.jsx)("button",{onClick:m,className:"text-blue-600 text-sm",children:"Mark all read"})]}),0===n.length?(0,a.jsx)("p",{className:"p-4 text-sm text-gray-500 text-center",children:"No notifications"}):n.map(e=>(0,a.jsxs)("div",{className:"border-b pb-3 mb-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"font-bold text-[15px] capitalize",children:e.title}),(0,a.jsx)("button",{onClick:()=>p(e._id),className:"text-red-600 text-xs",children:"Delete"})]}),(0,a.jsx)("p",{className:"text-gray-600 text-[13px] mt-1",children:e.message}),(0,a.jsx)("p",{className:"text-gray-500 text-[11px] mt-1",children:new Date(e.createdAt).toLocaleString()})]},e._id)),n.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{className:"border-gray-300 my-2"}),(0,a.jsx)("button",{onClick:u,className:"w-full py-2 text-red-600 font-semibold text-sm",children:"Delete All"})]})]})]})]}),(0,a.jsxs)("div",{className:"mt-[75px] w-full px-6",children:[(0,a.jsx)(N,{}),(0,a.jsx)(h,{}),(0,a.jsx)(w,{})]})]})}},6663:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(6585)}])},7814:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(2692).io)("https://matrimonial-backend-7ahc.onrender.com",{transports:["websocket"],reconnection:!0,reconnectionAttempts:10})}},e=>{e.O(0,[938,220,725,692,728,636,593,792],()=>e(e.s=6663)),_N_E=e.O()}]);