(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[748],{20151:(e,s,r)=>{"use strict";r.d(s,{H:()=>t});let t="https://matrimonial-backend-7ahc.onrender.com"},26851:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>p});var t=r(37876),a=r(14232),l=r(79516),d=r(42341),c=r(20151),n=r(94250),o=r.n(n);let i=e=>{let{report:s,onClose:r,refreshReports:a}=e;if(!s)return null;let{reporter:l,reportedUser:d,title:n,description:i,image:x,status:m,createdAt:p}=s,h=async e=>{try{let t=await fetch("".concat(c.H,"/admin/report/block/").concat(s._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"approve"===e?"Reviewed":"Blocked"})}),l=await t.json();console.log("API Response:",l),l.success?(alert("Report has been ".concat("approve"===e?"approved":"rejected")),r(),a()):alert(l.message||"Something went wrong")}catch(e){console.error("Error in handleAction:",e),alert("Error processing action")}};return(0,t.jsxs)("div",{className:"jsx-335342c2f5390679 fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4 py-10",children:[(0,t.jsxs)("div",{className:"jsx-335342c2f5390679 relative bg-white/90 backdrop-blur-lg border border-white/40 rounded-3xl shadow-2xl max-w-xl w-full p-8 animate-scaleIn",children:[(0,t.jsx)("button",{onClick:r,className:"jsx-335342c2f5390679 absolute top-4 right-4 text-gray-600 hover:text-black text-2xl font-bold",children:"\xd7"}),(0,t.jsxs)("div",{className:"jsx-335342c2f5390679 flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{className:"jsx-335342c2f5390679 flex items-center gap-2",children:[(0,t.jsx)("div",{className:"jsx-335342c2f5390679 "+"w-3 h-3 rounded-full ".concat("Blocked"===m?"bg-red-500":"Reviewed"===m?"bg-green-500":"bg-yellow-400")}),(0,t.jsx)("span",{className:"jsx-335342c2f5390679 text-sm font-medium capitalize text-gray-800",children:m})]}),(0,t.jsxs)("span",{className:"jsx-335342c2f5390679 text-sm text-gray-600",children:["Reported on: ",new Date(p).toLocaleDateString()]})]}),(0,t.jsx)("div",{className:"jsx-335342c2f5390679 grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6",children:[d,l].map((e,s)=>(0,t.jsxs)("div",{className:"jsx-335342c2f5390679 bg-white rounded-xl border border-gray-200 p-5 flex flex-col items-center text-center hover:shadow-md transition",children:[(0,t.jsx)("img",{src:(null==e?void 0:e.avatar)||(null==e?void 0:e.profileImage)||"/default-profile.png",alt:"User",className:"jsx-335342c2f5390679 w-20 h-20 rounded-full border object-cover shadow"}),(0,t.jsx)("h3",{className:"jsx-335342c2f5390679 font-semibold text-lg text-gray-800 mt-3",children:(null==e?void 0:e.name)||(null==e?void 0:e.fullName)||"Unnamed User"}),(0,t.jsx)("p",{className:"jsx-335342c2f5390679 text-xs text-blue-500 mt-1",children:1===s?"Reporter":"Reported User"})]},s))}),(0,t.jsxs)("div",{className:"jsx-335342c2f5390679 mb-4",children:[(0,t.jsx)("h4",{className:"jsx-335342c2f5390679 font-semibold text-base mb-1",children:"Reason:"}),(0,t.jsx)("p",{className:"jsx-335342c2f5390679 text-sm text-gray-700 leading-relaxed bg-gray-100 border border-gray-200 rounded-lg p-4 mt-1",children:n}),(0,t.jsx)("h4",{className:"jsx-335342c2f5390679 font-semibold text-base mb-1",children:"Description:"}),(0,t.jsx)("p",{className:"jsx-335342c2f5390679 text-sm text-gray-700 leading-relaxed bg-gray-100 border border-gray-200 rounded-lg p-4 mt-1",children:i})]}),(null==x?void 0:x.length)>0&&(0,t.jsxs)("div",{className:"jsx-335342c2f5390679 mb-4",children:[(0,t.jsxs)("h4",{className:"jsx-335342c2f5390679 text-sm font-semibold text-gray-800 mb-2",children:["Attached Screenshot",x.length>1?"s":"",":"]}),(0,t.jsx)("div",{className:"jsx-335342c2f5390679 flex flex-wrap gap-2",children:x.map((e,s)=>(0,t.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"jsx-335342c2f5390679 text-sm text-blue-600 bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded-md transition",children:["\uD83D\uDCCE Screenshot_",s+1,".jpg"]},s))})]}),(0,t.jsxs)("div",{className:"jsx-335342c2f5390679 flex justify-end gap-4 mt-8",children:[(0,t.jsx)("button",{onClick:()=>h("approve"),className:"jsx-335342c2f5390679 bg-green-500 hover:bg-green-600 text-white px-5 py-2 rounded-full font-semibold shadow",children:"Approve"}),(0,t.jsx)("button",{onClick:()=>h("reject"),className:"jsx-335342c2f5390679 bg-red-500 hover:bg-red-600 text-white px-5 py-2 rounded-full font-semibold shadow",children:"Reject"})]})]}),(0,t.jsx)(o(),{id:"335342c2f5390679",children:".animate-scaleIn.jsx-335342c2f5390679{animation:scaleIn.3s ease-out}@keyframes scaleIn{0%{transform:scale(.95);opacity:0}100%{transform:scale(1);opacity:1}}"})]})},x=e=>{let{report:s,currentPage:r,totalPages:l,setCurrentPage:c,itemsPerPage:n,refreshReports:o}=e,[x,m]=(0,a.useState)(null),p=e=>{e>=1&&e<=l&&c(e)};if(!s)return null;let{reporter:h,reportedUser:g,title:u,description:j,image:b,status:f,createdAt:v}=s;return(0,t.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-400 overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"text-gray-600 border border-gray-400",children:[(0,t.jsx)("th",{className:"py-3 px-4",children:"Reported User"}),(0,t.jsx)("th",{className:"py-3 px-4",children:"Report Date"}),(0,t.jsx)("th",{className:"py-3 px-4",children:"Reporter User"}),(0,t.jsx)("th",{className:"py-3 px-4",children:"Reason"}),(0,t.jsx)("th",{className:"py-3 px-4",children:"Status"}),(0,t.jsx)("th",{className:"py-3 px-4",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:s.map(e=>{var s,r,a,l,c,n,o,i;return(0,t.jsxs)("tr",{className:"border border-gray-400 hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("img",{src:(null==(s=e.reportedUser)?void 0:s.avatar)||(null==(r=e.reportedUser)?void 0:r.profileImage)||"/default-profile.png",alt:"Reported User",className:"w-8 h-8 rounded-full object-cover"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:null==(a=e.reportedUser)?void 0:a.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:null==(l=e.reportedUser)?void 0:l.id})]})]})}),(0,t.jsx)("td",{className:"py-3 px-4",children:new Date(e.reportDate).toLocaleDateString()}),(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("img",{src:(null==(c=e.reporter)?void 0:c.avatar)||(null==(n=e.reporter)?void 0:n.profileImage)||"/default-profile.png",alt:"Reporter",className:"w-8 h-8 rounded-full object-cover"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:null==(o=e.reporter)?void 0:o.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:null==(i=e.reporter)?void 0:i.id})]})]})}),(0,t.jsx)("td",{className:"py-3 px-4",children:e.title}),(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsx)("span",{className:(e=>{let s="px-2 py-1 rounded-full text-xs font-medium";switch(e.toLowerCase()){case"reviewed":return"".concat(s," bg-green-100 text-green-800");case"pending":return"".concat(s," bg-yellow-100 text-yellow-800");case"blocked":return"".concat(s," bg-red-100 text-red-800");default:return"".concat(s," bg-gray-100 text-gray-800")}})(e.status),children:e.status})}),(0,t.jsx)("td",{className:"mt-2 pr-3 flex gap-3",children:(0,t.jsxs)("button",{onClick:()=>m(e),className:"flex items-center gap-1 text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded",children:[(0,t.jsx)(d.A,{className:"w-4 h-4"})," View"]})})]},e._id)})})]}),x&&(0,t.jsx)(i,{report:x,onClose:()=>m(null),refreshReports:o}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-4 gap-3 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>p(r-1),disabled:1===r,className:"px-2 py-1 border rounded hover:bg-gray-100 disabled:opacity-50",children:"Prev"}),[...Array(l)].map((e,s)=>{let a=s+1;return(0,t.jsx)("button",{onClick:()=>p(a),className:"px-2 py-1 border rounded ".concat(a===r?"bg-blue-500 text-white border-blue-500":"hover:bg-gray-100"),children:a},a)}),(0,t.jsx)("button",{onClick:()=>p(r+1),disabled:r===l,className:"px-2 py-1 border rounded hover:bg-gray-100 disabled:opacity-50",children:"Next"})]}),(0,t.jsxs)("div",{className:"text-sm",children:["Items per page: ",n]})]})]})},m=()=>{let[e,s]=(0,a.useState)([]),[r,d]=(0,a.useState)(""),[n,o]=(0,a.useState)("all"),[i,m]=(0,a.useState)(""),[p,h]=(0,a.useState)(1),[g,u]=(0,a.useState)(1),j=async()=>{try{let e=await fetch("".concat(c.H,"/admin/report-analize?search=").concat(r,"&status=").concat(n,"&gender=").concat(i,"&page=").concat(p,"&limit=").concat(10)),t=await e.json();s(t.reports||[]),u(t.totalPages||1)}catch(e){console.error("Failed to fetch reports:",e)}};(0,a.useEffect)(()=>{j()},[r,n,i,p]);let b=e.length,f=e.filter(e=>"pending"===e.status.toLowerCase()).length,v=e.filter(e=>"reviewed"===e.status.toLowerCase()).length,y=e.filter(e=>"blocked"===e.status.toLowerCase()).length;return(0,t.jsxs)("div",{className:"p-5",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Reported Content"}),(0,t.jsx)("div",{className:"grid   grid-cols-1 sm:grid-cols-2 md:grid-cols-4 mr-20 ml-20 h-30 w-ful gap-20 mb-6",children:[{label:"Total Reports",value:b},{label:"Pending Reports",value:f},{label:"Reviewed Reports",value:v},{label:"Blocked Reports",value:y}].map(e=>{let{label:s,value:r}=e;return(0,t.jsx)("div",{className:"bg-white flex justify-center items-center border-2 border-gray-300  p-4 rounded-lg shadow-lg",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-xl text-gray-600",children:s}),(0,t.jsx)("div",{className:"text-3xl mt-3 font-bold text-gray-900",children:r})]})},s)})}),(0,t.jsxs)("div",{className:"border mt-5 p-4 border-gray-400 rounded",children:[(0,t.jsx)("div",{className:"bg-white  p-2 rounded-lg shadow-sm border border-gray-400 mb-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,t.jsxs)("div",{className:"relative w-full md:max-w-sm",children:[(0,t.jsx)(l.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,t.jsx)("input",{type:"text",placeholder:"Search by name",value:r,onChange:e=>{h(1),d(e.target.value)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 focus:border-0 rounded-lg focus:ring-2 focus:ring-gray-200   "})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsxs)("select",{value:n,onChange:e=>{h(1),o(e.target.value)},className:"px-3 py-2 border bg-gray-300 border-gray-300   hover:bg-gray-200 cursor-pointer rounded-lg",children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"reviewed",children:"Reviewed"}),(0,t.jsx)("option",{value:"blocked",children:"Blocked"})]}),(0,t.jsxs)("select",{value:i,onChange:e=>{h(1),m(e.target.value)},className:"px-3 py-2 border border-gray-300 bg-gray-300 cursor-pointer   rounded-lg",children:[(0,t.jsx)("option",{value:"",children:"All Genders"}),(0,t.jsx)("option",{value:"male",children:"Male"}),(0,t.jsx)("option",{value:"female",children:"Female"}),(0,t.jsx)("option",{value:"other",children:"Other"})]})]})]})}),(0,t.jsx)(x,{report:e,currentPage:p,totalPages:g,setCurrentPage:h,itemsPerPage:10,refreshReports:j})]})]})},p=()=>(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(m,{})})},43703:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/reportedcontent",function(){return r(26851)}])}},e=>{e.O(0,[491,636,593,792],()=>e(e.s=43703)),_N_E=e.O()}]);