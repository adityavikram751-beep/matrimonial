(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[868],{151:(e,t,a)=>{"use strict";a.d(t,{H:()=>s});let s="https://matrimonial-backend-7ahc.onrender.com"},1477:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(7876),l=a(4232),r=a(9516);let d=e=>{let{setSearch:t,topSearch:a,setTopSearch:l}=e;return(0,s.jsxs)("div",{className:"bg-gray-100 px-6 py-4 shadow-sm border-b fixed top-0 z-50 flex items-center justify-between",style:{left:"250px",width:"calc(100% - 250px)"},children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Verification Request"}),(0,s.jsxs)("div",{className:"flex items-center gap-5",children:[(0,s.jsxs)("div",{className:"flex items-center bg-white border border-gray-300 rounded-full px-4 py-2 w-[350px] shadow-md",children:[(0,s.jsx)(r.A,{className:"w-5 h-5 text-gray-500"}),(0,s.jsx)("input",{type:"text",placeholder:"Search By User ID",className:"ml-2 w-full outline-none text-gray-700",value:a,onChange:e=>{l(e.target.value),t(e.target.value)}})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"#FFC107",children:(0,s.jsx)("path",{d:"M12 24c1.104 0 2-.897 2-2h-4c0 1.103.896 2 2 2zm6.707-5l1.293 1.293V21H4v-1.707L5.293 19H6v-7c0-3.309 2.691-6 6-6s6 2.691 6 6v7h.707zM18 18H6v-7c0-2.757 2.243-5 5-5s5 2.243 5 5v7z"})}),(0,s.jsx)("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full"})]})]})]})};var n=a(1713);let c=(0,n.A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),i=(0,n.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var o=a(151);let x=e=>{var t,a,l;let{user:r}=e,d=((null==(t=r.firstName)?void 0:t[0])||"").toUpperCase()+((null==(a=r.lastName)?void 0:a[0])||"").toUpperCase();return(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[r.profileImage?(0,s.jsx)("img",{src:r.profileImage,className:"w-10 h-10 rounded-full object-cover"}):(0,s.jsx)("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center text-sm font-semibold",children:d}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold text-gray-900 text-sm",children:[r.firstName," ",r.lastName]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["#",r.id||(null==(l=r._id)?void 0:l.slice(-6))," / ",r.gender||"Not Mentioned"]})]})]})},m=e=>{var t,a;let{user:l,onClose:r}=e;return l?(0,s.jsx)("div",{id:"popup-bg",onClick:e=>{"popup-bg"===e.target.id&&r()},className:"fixed inset-0 bg-black/30 flex items-center justify-center z-[900]",children:(0,s.jsxs)("div",{className:"bg-white w-[260px] rounded-xl shadow-xl p-4 animate-fadeIn",children:[(0,s.jsx)("h3",{className:"text-center font-semibold text-sm mb-3",children:"Documents Uploaded"}),(0,s.jsxs)("div",{className:"max-h-[300px] overflow-y-auto space-y-3",children:[(null==(t=l.adhaarCard)?void 0:t.frontImage)&&(0,s.jsxs)("div",{className:"border rounded-xl shadow p-2",children:[(0,s.jsx)("img",{src:l.adhaarCard.frontImage,className:"w-full rounded-md"}),(0,s.jsx)("p",{className:"text-center text-xs mt-1 font-medium",children:"Aadhar Front"})]}),(null==(a=l.adhaarCard)?void 0:a.backImage)&&(0,s.jsxs)("div",{className:"border rounded-xl shadow p-2",children:[(0,s.jsx)("img",{src:l.adhaarCard.backImage,className:"w-full rounded-md"}),(0,s.jsx)("p",{className:"text-center text-xs mt-1 font-medium",children:"Aadhar Back"})]})]}),(0,s.jsx)("button",{onClick:r,className:"w-full bg-black text-white rounded-md py-1.5 mt-3 text-xs",children:"Close"})]})}):null};function p(){let[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)(null),[p,h]=(0,l.useState)(""),[u,j]=(0,l.useState)(""),[g,f]=(0,l.useState)(""),[b,N]=(0,l.useState)("Status"),[v,y]=(0,l.useState)("Gender"),[w,C]=(0,l.useState)(!0),[k,S]=(0,l.useState)(""),[A,_]=(0,l.useState)("asc"),[D,I]=(0,l.useState)(1),[M,z]=(0,l.useState)({total:0,pending:0,approved:0,rejected:0});(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat(o.H,"/admin/user-verify")),a=await e.json();t(a.data),z({total:a.data.length,pending:a.data.filter(e=>"pending"===e.adminApprovel).length,approved:a.data.filter(e=>"approved"===e.adminApprovel).length,rejected:a.data.filter(e=>"reject"===e.adminApprovel).length})}finally{C(!1)}})()},[]);let F=e=>{k===e?_("asc"===A?"desc":"asc"):(S(e),_("asc"))},T=(0,l.useMemo)(()=>{let t=[...e];return p&&(t=t.filter(e=>{var t,a,s;return(null==(t=e.firstName)?void 0:t.toLowerCase().includes(p.toLowerCase()))||(null==(a=e.lastName)?void 0:a.toLowerCase().includes(p.toLowerCase()))||(null==(s=e._id)?void 0:s.includes(p))})),"Status"!==b&&(t=t.filter(e=>e.adminApprovel===b)),"Gender"!==v&&(t=t.filter(e=>e.gender===v)),"name"===k&&t.sort((e,t)=>"asc"===A?"".concat(e.firstName," ").concat(e.lastName).localeCompare("".concat(t.firstName," ").concat(t.lastName)):"".concat(t.firstName," ").concat(t.lastName).localeCompare("".concat(e.firstName," ").concat(e.lastName))),"date"===k&&t.sort((e,t)=>"asc"===A?new Date(e.createdAt)-new Date(t.createdAt):new Date(t.createdAt)-new Date(e.createdAt)),t},[e,p,b,v,k,A]),E=Math.ceil(T.length/10),L=T.slice((D-1)*10,10*D);return(0,s.jsxs)("div",{className:"px-6 py-6",children:[(0,s.jsx)(d,{setSearch:h,topSearch:u,setTopSearch:j}),(0,s.jsxs)("div",{className:"pt-[px]",children:[(0,s.jsx)("div",{className:"flex justify-center gap-20 mb-10",children:[["Total Request This Week",M.total],["Pending Verification",M.pending],["Approved This Week",M.approved],["Rejected Due To Mismatch",M.rejected]].map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"w-[200px] bg-white border p-6 rounded-2xl shadow",children:[(0,s.jsx)("p",{className:"text-base font-semibold text-center",children:t}),(0,s.jsx)("h2",{className:"text-3xl font-black text-center mt-2",children:a})]},t)})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto p-5 border rounded-2xl bg-white shadow",children:[(0,s.jsxs)("div",{className:"bg-gray-100 border rounded-xl p-3 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"relative bg-white w-[300px]",children:[(0,s.jsx)(r.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5"}),(0,s.jsx)("input",{placeholder:"Search By User ID",value:g,onChange:e=>{f(e.target.value),h(e.target.value),I(1)},className:"w-full pl-10 pr-3 py-2 border rounded-lg text-sm"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("select",{value:b,onChange:e=>{N(e.target.value),I(1)},className:"border px-3 py-2 bg-gray-200 rounded-md",children:[(0,s.jsx)("option",{children:"Status"}),(0,s.jsx)("option",{value:"approved",children:"Approved"}),(0,s.jsx)("option",{value:"pending",children:"Pending"}),(0,s.jsx)("option",{value:"reject",children:"Rejected"})]}),(0,s.jsxs)("select",{value:v,onChange:e=>{y(e.target.value),I(1)},className:"border px-3 py-2 bg-gray-200 rounded-md",children:[(0,s.jsx)("option",{children:"Gender"}),(0,s.jsx)("option",{children:"Male"}),(0,s.jsx)("option",{children:"Female"})]})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto mt-5 rounded-xl border",children:w?(0,s.jsx)("div",{className:"flex justify-center py-10",children:(0,s.jsx)(c,{className:"animate-spin w-6 h-6"})}):(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-[#F7F7F7] text-gray-700",children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left font-semibold border-b",children:(0,s.jsxs)("button",{onClick:()=>F("name"),className:"flex items-center gap-1",children:["Reported User","name"===k?"asc"===A?"▲":"▼":"▲"]})}),(0,s.jsx)("th",{className:"px-4 py-3 text-left font-semibold border-b",children:(0,s.jsxs)("button",{onClick:()=>F("date"),className:"flex items-center gap-1",children:["Report Date","date"===k?"asc"===A?"▲":"▼":"▲"]})}),(0,s.jsx)("th",{className:"px-4 py-3 text-left font-semibold border-b",children:"Documents Submitted"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left font-semibold border-b",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left font-semibold border-b",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y",children:L.map(e=>{var t,a;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)(x,{user:e})}),(0,s.jsx)("td",{className:"px-4 py-3",children:new Date(e.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(null==(t=e.adhaarCard)?void 0:t.frontImage)||(null==(a=e.adhaarCard)?void 0:a.backImage)?"Aadhar Card":"No Document Submitted"}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-3 h-3 rounded-full ".concat({approved:"bg-green-500",pending:"bg-yellow-500",reject:"bg-red-500"}[e.adminApprovel]||"bg-gray-400")}),(0,s.jsx)("span",{className:{approved:"text-green-600",pending:"text-yellow-600",reject:"text-red-600"}[e.adminApprovel]||"text-gray-600",children:e.adminApprovel})]})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("button",{onClick:()=>n(e),className:"flex items-center gap-1 text-blue-700",children:[(0,s.jsx)(i,{size:14})," View"]})})]},e._id)})})]})}),(0,s.jsxs)("div",{className:"flex justify-center mt-4 items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>I(e=>Math.max(1,e-1)),disabled:1===D,className:"text-gray-700 disabled:opacity-40",children:"‹ Prev"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[[1,2,3,4].map(e=>e<=E?(0,s.jsx)("button",{onClick:()=>I(e),className:"".concat(D===e?"font-bold text-black underline":"text-gray-600"),children:e},e):null),E>4&&(0,s.jsx)("span",{className:"text-gray-500",children:"....."}),E>4&&(0,s.jsx)("button",{onClick:()=>I(E),className:"".concat(D===E?"font-bold text-black underline":"text-gray-600"),children:E})]}),(0,s.jsx)("button",{onClick:()=>I(e=>Math.min(E,e+1)),disabled:D===E,className:"text-gray-700 disabled:opacity-40",children:"Next ›"})]})]}),a&&(0,s.jsx)(m,{user:a,onClose:()=>n(null)})]})]})}let h=()=>{let[e,t]=(0,l.useState)("");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d,{onSearch:e=>t(e)}),(0,s.jsx)("div",{className:"pt-[90px]",children:(0,s.jsx)(p,{search:e})})]})}},2567:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/verificationrequest",function(){return a(1477)}])},9516:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1713).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])}},e=>{e.O(0,[636,593,792],()=>e(e.s=2567)),_N_E=e.O()}]);