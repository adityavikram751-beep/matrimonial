(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[748],{151:(e,s,r)=>{"use strict";r.d(s,{H:()=>t});let t="https://matrimonial-backend-7ahc.onrender.com"},3703:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/reportedcontent",function(){return r(8256)}])},8256:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var t=r(7876),l=r(4232),a=r(2577);let n=()=>{let[e,s]=(0,l.useState)("");return(0,t.jsxs)("div",{className:"w-full bg-[#f5f5f5] py-3 px-4 border-b flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-black whitespace-nowrap",children:"Reported Content"}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)("div",{className:"relative cursor-pointer",children:[(0,t.jsx)(a.A,{className:"h-7 w-7 text-yellow-500"}),(0,t.jsx)("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full border-2 border-white"})]})})]})};var d=r(9516),c=r(4250),o=r.n(c),i=r(151);let x=e=>{let{report:s,onClose:r,refreshReports:l}=e;if(!s)return null;let{reporter:a,reportedUser:n,title:d,description:c,image:x,status:m,createdAt:p}=s,h=async e=>{try{let t=await fetch("".concat(i.H,"/admin/report/status/").concat(s._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"approve"===e?"approved":"rejected"})}),a=await t.json();console.log("API Response:",a),a.success?(alert("Report has been ".concat("approve"===e?"approved":"rejected")),r(),l()):alert(a.message||"Something went wrong")}catch(e){console.error("Error in handleAction:",e),alert("Error processing action")}};return(0,t.jsxs)("div",{id:"backdrop",onClick:e=>{"backdrop"===e.target.id&&r()},className:"jsx-335342c2f5390679 fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm px-4 py-10",children:[(0,t.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"jsx-335342c2f5390679 relative bg-white/90 backdrop-blur-lg border border-white/40 rounded-3xl shadow-2xl max-w-xl w-full p-8 animate-scaleIn",children:[(0,t.jsxs)("div",{className:"jsx-335342c2f5390679 flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{className:"jsx-335342c2f5390679 flex items-center gap-2",children:[(0,t.jsx)("div",{className:"jsx-335342c2f5390679 "+"w-3 h-3 rounded-full ".concat("rejected"===m?"bg-red-500":"approved"===m?"bg-green-500":"bg-yellow-400")}),(0,t.jsx)("span",{className:"jsx-335342c2f5390679 text-sm font-medium capitalize text-gray-800",children:m})]}),(0,t.jsxs)("span",{className:"jsx-335342c2f5390679 text-sm text-gray-600",children:["Reported on: ",new Date(p).toLocaleDateString()]})]}),(0,t.jsx)("div",{className:"jsx-335342c2f5390679 grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6",children:[n,a].map((e,s)=>(0,t.jsxs)("div",{className:"jsx-335342c2f5390679 bg-white rounded-xl border border-gray-200 p-5 flex flex-col items-center text-center hover:shadow-md transition",children:[(0,t.jsx)("img",{src:(null==e?void 0:e.avatar)||(null==e?void 0:e.profileImage)||"/default-profile.png",alt:"User",className:"jsx-335342c2f5390679 w-20 h-20 rounded-full border object-cover shadow"}),(0,t.jsx)("h3",{className:"jsx-335342c2f5390679 font-semibold text-lg text-gray-800 mt-3",children:(null==e?void 0:e.name)||(null==e?void 0:e.fullName)||"Unnamed User"}),(0,t.jsx)("p",{className:"jsx-335342c2f5390679 text-xs text-blue-500 mt-1",children:1===s?"Reporter":"Reported User"})]},s))}),(0,t.jsxs)("div",{className:"jsx-335342c2f5390679 mb-4",children:[(0,t.jsx)("h4",{className:"jsx-335342c2f5390679 font-semibold text-base mb-1",children:"Reason:"}),(0,t.jsx)("p",{className:"jsx-335342c2f5390679 text-sm text-gray-700 leading-relaxed bg-gray-100 border border-gray-200 rounded-lg p-4 mt-1",children:d}),(0,t.jsx)("h4",{className:"jsx-335342c2f5390679 font-semibold text-base mb-1 mt-4",children:"Description:"}),(0,t.jsx)("p",{className:"jsx-335342c2f5390679 text-sm text-gray-700 leading-relaxed bg-gray-100 border border-gray-200 rounded-lg p-4 mt-1",children:c})]}),(null==x?void 0:x.length)>0&&(0,t.jsxs)("div",{className:"jsx-335342c2f5390679 mb-4",children:[(0,t.jsxs)("h4",{className:"jsx-335342c2f5390679 text-sm font-semibold text-gray-800 mb-2",children:["Attached Screenshot",x.length>1?"s":"",":"]}),(0,t.jsx)("div",{className:"jsx-335342c2f5390679 flex flex-wrap gap-2",children:x.map((e,s)=>(0,t.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"jsx-335342c2f5390679 text-sm text-blue-600 bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded-md transition",children:["\uD83D\uDCCE Screenshot_",s+1,".jpg"]},s))})]}),(0,t.jsxs)("div",{className:"jsx-335342c2f5390679 flex justify-end gap-4 mt-8",children:[(0,t.jsx)("button",{onClick:()=>h("approve"),className:"jsx-335342c2f5390679 bg-green-500 hover:bg-green-600 text-white px-5 py-2 rounded-full font-semibold shadow",children:"Approve"}),(0,t.jsx)("button",{onClick:()=>h("reject"),className:"jsx-335342c2f5390679 bg-red-500 hover:bg-red-600 text-white px-5 py-2 rounded-full font-semibold shadow",children:"Reject"})]})]}),(0,t.jsx)(o(),{id:"335342c2f5390679",children:".animate-scaleIn.jsx-335342c2f5390679{animation:scaleIn.3s ease-out}@keyframes scaleIn{0%{transform:scale(.95);opacity:0}100%{transform:scale(1);opacity:1}}"})]})},m=e=>{let{active:s,direction:r}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center ml-1 mt-[2px] leading-[0.4]",children:[(0,t.jsx)("div",{className:"w-2 h-2 rotate-45 border-t-2 border-l-2 ".concat(s&&"asc"===r?"border-gray-700":"border-gray-400")}),(0,t.jsx)("div",{className:"w-2 h-2 rotate-45 border-b-2 border-r-2 mt-[3px] ".concat(s&&"desc"===r?"border-gray-700":"border-gray-400")})]})},p=e=>{let{report:s,currentPage:r,totalPages:a,setCurrentPage:n,refreshReports:d}=e,[c,o]=(0,l.useState)(null),[i,p]=(0,l.useState)({key:null,direction:"asc"}),h=e=>{p(s=>({key:e,direction:s.key===e&&"asc"===s.direction?"desc":"asc"}))},u=(0,l.useMemo)(()=>i.key?[...s].sort((e,s)=>{var r,t,l,a,n,d,c,o;let x="",m="";switch(i.key){case"reportedUser":x=(null==(r=e.reportedUser)?void 0:r.fullName)||(null==(t=e.reportedUser)?void 0:t.name)||"",m=(null==(l=s.reportedUser)?void 0:l.fullName)||(null==(a=s.reportedUser)?void 0:a.name)||"";break;case"reportDate":x=new Date(e.createdAt),m=new Date(s.createdAt);break;case"reporterUser":x=(null==(n=e.reporter)?void 0:n.fullName)||(null==(d=e.reporter)?void 0:d.name)||"",m=(null==(c=s.reporter)?void 0:c.fullName)||(null==(o=s.reporter)?void 0:o.name)||""}return x<m?"asc"===i.direction?-1:1:x>m?"asc"===i.direction?1:-1:0}):s,[s,i]),g=e=>(null==e?void 0:e.profileImage)||"/default-profile.png",j=e=>(null==e?void 0:e.fullName)||(null==e?void 0:e.name)||"Unknown User",b=e=>(null==e?void 0:e.userId)?"#".concat(e.userId):"#------",f=e=>(null==e?void 0:e.gender)||"N/A";return(0,t.jsxs)("div",{className:"bg-white  px-1",children:[(0,t.jsx)("div",{className:"w-full h-[1px] bg-gray-500 mb-2"}),(0,t.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:" border-b border-gray-500",children:[(0,t.jsx)("th",{className:"py-3 px-2 cursor-pointer font-semibold",onClick:()=>h("reportedUser"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:["Reported User",(0,t.jsx)(m,{active:"reportedUser"===i.key,direction:i.direction})]})}),(0,t.jsx)("th",{className:"py-3 px-2 cursor-pointer font-semibold",onClick:()=>h("reportDate"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:["Report Date",(0,t.jsx)(m,{active:"reportDate"===i.key,direction:i.direction})]})}),(0,t.jsx)("th",{className:"py-3 px-2 cursor-pointer font-semibold",onClick:()=>h("reporterUser"),children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:["Reporter User",(0,t.jsx)(m,{active:"reporterUser"===i.key,direction:i.direction})]})}),(0,t.jsx)("th",{className:"py-3 px-2 font-semibold",children:"Reason"}),(0,t.jsx)("th",{className:"py-3 px-2 font-semibold",children:"Status"}),(0,t.jsx)("th",{className:"py-3 px-2 font-semibold",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:u.map(e=>(0,t.jsxs)("tr",{className:"border-t border-gray-300 hover:bg-gray-50 transition",children:[(0,t.jsx)("td",{className:"py-[14px] px-3 align-middle",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("img",{src:g(e.reportedUser),className:"w-11 h-11 rounded-full object-cover"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold",children:j(e.reportedUser)}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[b(e.reportedUser)," /"," ",f(e.reportedUser)]})]})]})}),(0,t.jsx)("td",{className:"py-[14px] px-3 align-middle",children:new Date(e.createdAt).toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"})}),(0,t.jsx)("td",{className:"py-[14px] px-3 align-middle",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("img",{src:g(e.reporter),className:"w-11 h-11 rounded-full object-cover"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold",children:j(e.reporter)}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[b(e.reporter)," / ",f(e.reporter)]})]})]})}),(0,t.jsx)("td",{className:"py-[14px] px-3 align-middle",children:e.title}),(0,t.jsx)("td",{className:"py-[14px] px-3 align-middle",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-3 h-3 rounded-full ".concat((e=>"approved"===(e=null==e?void 0:e.toLowerCase())?"bg-green-500":"pending"===e?"bg-yellow-500":"bg-red-500")(e.status))}),(0,t.jsx)("span",{children:e.status})]})}),(0,t.jsx)("td",{className:"py-[14px] px-3 align-middle",children:(0,t.jsx)("div",{className:"flex items-center gap-3",children:(0,t.jsx)("button",{className:"text-gray-700",onClick:()=>o(e),children:"View"})})})]},e._id))})]}),(0,t.jsxs)("div",{className:"flex justify-center items-center gap-3 mt-4 text-sm",children:[(0,t.jsx)("button",{disabled:1===r,onClick:()=>n(r-1),children:"◀ Prev"}),[...Array(a)].map((e,s)=>(0,t.jsx)("button",{onClick:()=>n(s+1),className:"".concat(r===s+1?"font-bold underline":"text-gray-600"),children:s+1},s)),(0,t.jsx)("span",{children:"....."}),(0,t.jsx)("button",{disabled:r===a,onClick:()=>n(r+1),children:"Next ▶"})]}),c&&(0,t.jsx)(x,{report:c,onClose:()=>o(null),refreshReports:d})]})},h=()=>{let[e,s]=(0,l.useState)([]),[r,a]=(0,l.useState)(""),[n,c]=(0,l.useState)("all"),[o,x]=(0,l.useState)(""),[m,h]=(0,l.useState)(1),[u,g]=(0,l.useState)(1),j=async()=>{try{let e=await fetch("".concat(i.H,"/admin/report-analize?search=").concat(r,"&status=").concat(n,"&gender=").concat(o,"&page=").concat(m,"&limit=").concat(10)),t=await e.json();s(t.reports||[]),g(t.totalPages||1)}catch(e){console.error("Failed to fetch reports:",e)}};(0,l.useEffect)(()=>{j()},[r,n,o,m]);let b=e.length,f=e.filter(e=>{var s;return(null==(s=e.status)?void 0:s.toLowerCase())==="pending"}).length,v=e.filter(e=>{var s,r;return(null==(s=e.status)?void 0:s.toLowerCase())==="reviewed"||(null==(r=e.status)?void 0:r.toLowerCase())==="approved"}).length,N=e.filter(e=>{var s;return(null==(s=e.status)?void 0:s.toLowerCase())==="blocked"}).length;return(0,t.jsxs)("div",{className:"p-5",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 px-10 mb-10",children:[{label:"Total Reports This Week",value:b},{label:"Pending Report Review",value:f},{label:"Action Taken",value:v},{label:"Blocked User",value:N}].map(e=>{let{label:s,value:r}=e;return(0,t.jsxs)("div",{className:"bg-white border border-gray-300 rounded-xl shadow-sm p-6 flex flex-col justify-center items-center",style:{height:"150px"},children:[(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-800 text-center",children:s}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-4",children:(e=>e>=1e3?(e/1e3).toFixed(1)+" K":e)(r)})]},s)})}),(0,t.jsxs)("div",{className:"border mt-5 p-4 bg-white border-gray-400 rounded",children:[(0,t.jsx)("div",{className:"bg-gray-100 p-2 rounded-lg shadow-sm border border-gray-400 mb-2",children:(0,t.jsxs)("div",{className:" flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,t.jsxs)("div",{className:" relative w-full  md:max-w-sm",children:[(0,t.jsx)(d.A,{className:" absolute left-3 top-1/2 transform -translate-y-1/2  text-gray-400 w-4 h-4"}),(0,t.jsx)("input",{type:"text",placeholder:"Search by name or email",value:r,onChange:e=>{h(1),a(e.target.value)},className:"w-full pl-10 pr-4 py-2  bg-white border  border-gray-400 rounded-lg focus:ring-2 focus:ring-gray-200"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsxs)("select",{value:n,onChange:e=>{h(1),c(e.target.value)},className:"px-3 py-2 border bg-gray-300 border-gray-400 rounded-lg",children:[(0,t.jsx)("option",{value:"all",children:" Status"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"approved",children:"Approved"}),(0,t.jsx)("option",{value:"blocked",children:"Blocked"})]}),(0,t.jsxs)("select",{value:o,onChange:e=>{h(1),x(e.target.value)},className:"px-3 py-2 border bg-gray-300 border-gray-400 rounded-lg",children:[(0,t.jsx)("option",{value:"",children:" Genders"}),(0,t.jsx)("option",{value:"Male",children:"Male"}),(0,t.jsx)("option",{value:"Female",children:"Female"})]})]})]})}),(0,t.jsx)(p,{report:e,currentPage:m,totalPages:u,setCurrentPage:h,itemsPerPage:10,refreshReports:j})]})]})},u=()=>(0,t.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,t.jsx)("div",{className:"shadow-md sticky top-0 z-30 bg-[#f5f5f5]",children:(0,t.jsx)(n,{})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,t.jsx)(h,{})})]})}},e=>{e.O(0,[151,636,593,792],()=>e(e.s=3703)),_N_E=e.O()}]);