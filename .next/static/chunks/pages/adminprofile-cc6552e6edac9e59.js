(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[480],{2834:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>g});var a=n(7876),l=n(4232),i=n(4587),t=n.n(i),c=n(8615);let r="https://matrimonial-backend-7ahc.onrender.com";function o(){for(let e of["token","auth","user","matrimonial_token","accessToken"]){let s=localStorage.getItem(e);if(s)try{let e=JSON.parse(s),n=function e(s){if(!s)return null;if("string"==typeof s)return 3===s.split(".").length||s.length>10?s:null;if("object"==typeof s)for(let n of Object.keys(s)){let a=e(s[n]);if(a)return a}return null}(e);if(n)return n}catch(e){if(3===s.split(".").length||s.length>20)return s}}return null}function d(e){let{message:s,type:n="info",onClose:l}=e;return(0,a.jsx)("div",{className:"fixed right-4 top-4 z-50 px-4 py-2 text-white rounded ".concat("success"===n?"bg-green-600":"error"===n?"bg-red-600":"bg-gray-700"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{children:s}),(0,a.jsx)("button",{onClick:l,children:"✕"})]})})}function h(e){let{title:s,onClose:n,children:l}=e;return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-3",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:n}),(0,a.jsxs)("div",{className:"relative bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:s}),(0,a.jsx)("button",{onClick:n,children:"✕"})]}),l]})]})}function x(e){let{defaultValues:s,onSave:n,onClose:i}=e,[t,c]=(0,l.useState)({name:s.name||"",email:s.email||"",phone:s.phone||"",assignedRegion:s.assignedRegion||""}),[r,o]=(0,l.useState)(null),[d,x]=(0,l.useState)(s.profileImage),u=async e=>{e.preventDefault(),await n({...t,profileImage:r}),i()};return(0,a.jsx)(h,{title:"Edit Basic Info",onClose:i,children:(0,a.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,a.jsxs)("label",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"Name"}),(0,a.jsx)("input",{className:"border p-2 rounded",value:t.name,onChange:e=>c({...t,name:e.target.value})})]}),(0,a.jsxs)("label",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"Email"}),(0,a.jsx)("input",{type:"email",className:"border p-2 rounded",value:t.email,onChange:e=>c({...t,email:e.target.value})})]}),(0,a.jsxs)("label",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"Phone"}),(0,a.jsx)("input",{className:"border p-2 rounded",value:t.phone,onChange:e=>c({...t,phone:e.target.value})})]}),(0,a.jsxs)("label",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"Assigned Region"}),(0,a.jsx)("input",{className:"border p-2 rounded",value:t.assignedRegion,onChange:e=>c({...t,assignedRegion:e.target.value})})]}),(0,a.jsxs)("label",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"Profile Image"}),(0,a.jsx)("input",{type:"file",onChange:e=>{var s;(s=e.target.files[0])&&(o(s),x(URL.createObjectURL(s)))}}),d&&(0,a.jsx)("img",{src:d,className:"w-20 h-20 mt-2 rounded-full object-cover"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 bg-gray-300",children:"Cancel"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white",children:"Save"})]})]})})}function u(e){let{defaultValues:s,onSave:n,onClose:i}=e,[t,c]=(0,l.useState)({newPassword:"",twoFactor:s.twoFactor,recentLoginDevice:s.recentLoginDevice,suspiciousLoginAlert:s.suspiciousLoginAlert}),r=async e=>{e.preventDefault(),await n(t),i()};return(0,a.jsx)(h,{title:"Security Settings",onClose:i,children:(0,a.jsxs)("form",{onSubmit:r,className:"space-y-4",children:[(0,a.jsxs)("label",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"New Password"}),(0,a.jsx)("input",{type:"password",className:"border p-2 rounded",value:t.newPassword,onChange:e=>c({...t,newPassword:e.target.value})})]}),(0,a.jsxs)("label",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Two Factor Auth"}),(0,a.jsx)("input",{type:"checkbox",checked:t.twoFactor,onChange:e=>c({...t,twoFactor:e.target.checked})})]}),(0,a.jsxs)("label",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"Recent Login Device"}),(0,a.jsx)("input",{className:"border p-2 rounded",value:t.recentLoginDevice,onChange:e=>c({...t,recentLoginDevice:e.target.value})})]}),(0,a.jsxs)("label",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Suspicious Login Alert"}),(0,a.jsx)("input",{type:"checkbox",checked:t.suspiciousLoginAlert,onChange:e=>c({...t,suspiciousLoginAlert:e.target.checked})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 bg-gray-300",children:"Cancel"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white",children:"Save"})]})]})})}function p(e){let{defaultValues:s,onSave:n,onClose:i}=e,[t,c]=(0,l.useState)({language:s.language,theme:s.theme,notifications:s.notifications,landingPage:s.landingPage}),r=async e=>{e.preventDefault(),await n(t),i()};return(0,a.jsx)(h,{title:"Preferences",onClose:i,children:(0,a.jsxs)("form",{onSubmit:r,className:"space-y-4",children:[(0,a.jsxs)("label",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"Language"}),(0,a.jsx)("input",{className:"border p-2 rounded",value:t.language,onChange:e=>c({...t,language:e.target.value})})]}),(0,a.jsxs)("label",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"Landing Page"}),(0,a.jsx)("input",{className:"border p-2 rounded",value:t.landingPage,onChange:e=>c({...t,landingPage:e.target.value})})]}),(0,a.jsxs)("label",{className:"flex flex-col",children:[(0,a.jsx)("span",{children:"Theme"}),(0,a.jsxs)("select",{className:"border p-2 rounded",value:t.theme,onChange:e=>c({...t,theme:e.target.value}),children:[(0,a.jsx)("option",{value:"light",children:"Light"}),(0,a.jsx)("option",{value:"dark",children:"Dark"})]})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.notifications,onChange:e=>c({...t,notifications:e.target.checked})}),(0,a.jsx)("span",{children:"Notifications"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 bg-gray-300",children:"Cancel"}),(0,a.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white",children:"Save"})]})]})})}function g(){let[e,s]=(0,l.useState)({}),[n,i]=(0,l.useState)(!0),[h,g]=(0,l.useState)(!1),[m,f]=(0,l.useState)(!1),[j,b]=(0,l.useState)(!1),[N,v]=(0,l.useState)(null),y=async()=>{let e=o(),n=await fetch("".concat(r,"/admin/profile"),{headers:e?{Authorization:"Bearer ".concat(e)}:{}}),a=await n.json();a.success&&(s(a.data),localStorage.setItem("admin_profile",JSON.stringify(a.data)),window.dispatchEvent(new Event("adminProfileUpdated"))),i(!1)};(0,l.useEffect)(()=>{y()},[]);let w=async e=>{let s=o(),n=new FormData;n.append("name",e.name),n.append("email",e.email),n.append("assignedRegion",e.assignedRegion),n.append("phone",e.phone),e.profileImage&&n.append("profileImage",e.profileImage);let a=await fetch("".concat(r,"/admin/profile/basic"),{method:"PUT",headers:s?{Authorization:"Bearer ".concat(s)}:{},body:n}),l=await a.json();l.success&&(v({type:"success",message:"Basic info updated!"}),localStorage.setItem("admin_profile",JSON.stringify(l.data)),window.dispatchEvent(new Event("adminProfileUpdated")),y())},S=async e=>{let s=o(),n=await fetch("".concat(r,"/admin/profile/security"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(e)}),a=await n.json();a.success&&(v({type:"success",message:"Security updated!"}),localStorage.setItem("admin_profile",JSON.stringify(a.data)),window.dispatchEvent(new Event("adminProfileUpdated")),y())},C=async e=>{let s=o(),n=await fetch("".concat(r,"/admin/profile/preferences"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify(e)}),a=await n.json();a.success&&(v({type:"success",message:"Preferences updated!"}),localStorage.setItem("admin_profile",JSON.stringify(a.data)),window.dispatchEvent(new Event("adminProfileUpdated")),y())};return n?(0,a.jsx)("p",{className:"p-6",children:"Loading profile..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between p-4 bg-gray-100 shadow fixed top-0 w-full",children:[(0,a.jsx)("h1",{className:"font-bold text-lg",children:"Admin Profile"}),(0,a.jsx)(t(),{src:"/notification.png",alt:"",width:36,height:36})]}),(0,a.jsxs)("div",{className:"mt-20 p-6 flex gap-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"w-48 h-48 rounded-full overflow-hidden border",children:e.profileImage?(0,a.jsx)("img",{src:e.profileImage,className:"w-full h-full object-cover"}):(0,a.jsx)(t(),{src:"/profile.png",fill:!0,alt:"profile"})}),(0,a.jsx)("button",{onClick:()=>g(!0),className:"mt-4 bg-green-600 text-white px-5 py-2 rounded",children:"Edit Profile"}),(0,a.jsx)("p",{className:"mt-4",children:e.email})]}),(0,a.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border rounded relative",children:[(0,a.jsx)("div",{className:"absolute top-2 right-2 cursor-pointer",onClick:()=>g(!0),children:(0,a.jsx)(c.SG1,{})}),(0,a.jsx)("h2",{className:"font-semibold text-lg",children:"Basic Info"}),(0,a.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Name:"})," ",(0,a.jsx)("span",{children:e.name})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Email:"})," ",(0,a.jsx)("span",{children:e.email})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Phone:"})," ",(0,a.jsx)("span",{children:e.phone})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Region:"})," ",(0,a.jsx)("span",{children:e.assignedRegion})]})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border rounded relative",children:[(0,a.jsx)("div",{className:"absolute top-2 right-2 cursor-pointer",onClick:()=>f(!0),children:(0,a.jsx)(c.SG1,{})}),(0,a.jsx)("h2",{className:"font-semibold text-lg",children:"Security"}),(0,a.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Password:"})," ",(0,a.jsx)("span",{children:"••••••••"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Two Factor Auth:"}),(0,a.jsx)("span",{children:e.twoFactor?"Enabled":"Disabled"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Recent Login Device:"}),(0,a.jsx)("span",{children:e.recentLoginDevice})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Suspicious Login Alert:"}),(0,a.jsx)("span",{children:e.suspiciousLoginAlert?"Enabled":"Disabled"})]})]})]}),(0,a.jsxs)("div",{className:"p-4 bg-amber-50 border rounded relative",children:[(0,a.jsx)("div",{className:"absolute top-2 right-2 cursor-pointer",onClick:()=>b(!0),children:(0,a.jsx)(c.SG1,{})}),(0,a.jsx)("h2",{className:"font-semibold text-lg",children:"Preferences"}),(0,a.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Language:"})," ",(0,a.jsx)("span",{children:e.language})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Landing Page:"})," ",(0,a.jsx)("span",{children:e.landingPage})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Theme:"})," ",(0,a.jsx)("span",{children:e.theme})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Notifications:"}),(0,a.jsx)("span",{children:e.notifications?"ON":"OFF"})]})]})]})]})]}),h&&(0,a.jsx)(x,{defaultValues:e,onSave:w,onClose:()=>g(!1)}),m&&(0,a.jsx)(u,{defaultValues:e,onSave:S,onClose:()=>f(!1)}),j&&(0,a.jsx)(p,{defaultValues:e,onSave:C,onClose:()=>b(!1)}),N&&(0,a.jsx)(d,{message:N.message,type:N.type,onClose:()=>v(null)})]})}},5389:(e,s,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/adminprofile",function(){return n(2834)}])}},e=>{e.O(0,[141,636,593,792],()=>e(e.s=5389)),_N_E=e.O()}]);